<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Notes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class="wrapper">
    <div class="header-icon">
        <img src="favicon-32x32.png">
    </div>
    <div class="search-bar"><input type="text" id="searchInput" placeholder="Search..." onkeyup="filterLinks()"></div>
    <div id="linkList">
        {{ links }}
    </div>
</div>
<script>
    'use strict';

    function fuzzysearch(needle, haystack) {
        var hlen = haystack.length;
        var nlen = needle.length;
        if (nlen > hlen) {
            return false;
        }
        if (nlen === hlen) {
            return needle === haystack;
        }
        outer: for (var i = 0, j = 0; i < nlen; i++) {
            var nch = needle.charCodeAt(i);
            while (j < hlen) {
                if (haystack.charCodeAt(j++) === nch) {
                    continue outer;
                }
            }
            return false;
        }
        return true;
    }

    function filterLinks() {
        var input = document.getElementById('searchInput').value.toLowerCase();
        var links = document.querySelectorAll('#linkList a');

        links.forEach(function(link) {
            var text = link.textContent.toLowerCase();
            if (fuzzysearch(input, text)) {
                link.style.display = ''; // Show link
            } else {
                link.style.display = 'none'; // Hide link
            }
        });
    }
</script>
</body>
</html>
